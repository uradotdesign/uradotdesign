---
export interface Props {
  title: string;
  subtitle: string;
  description: string;
  image?: string | { light: string; dark: string } | null;
  link: string;
  linkText?: string;
  currentLang: string;
}

const { title, subtitle, description, image, link, linkText, currentLang } =
  Astro.props;

const defaultLinkText =
  linkText ||
  (currentLang === "de" ? "Wie es funktioniert hat" : "See how it worked");
const headingId = "service-case-study-heading";
---

<section
  class="relative py-20 lg:py-32 px-6 sm:px-8 lg:px-12 xl:px-16"
  aria-labelledby={headingId}
>
  <div class="max-w-7xl mx-auto">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
      <!-- Left: Case Study Heading -->
      <div>
        <div class="border-t border-foreground/20 pt-6">
          <h2
            id={headingId}
            class="text-sm font-mono uppercase tracking-wider text-foreground/60"
          >
            RELEVANT CASE STUDY
          </h2>
        </div>
      </div>

      <!-- Right: Case Study Card -->
      <div>
        <a
          href={link}
          class="group block relative overflow-hidden rounded-2xl border border-foreground/10 hover:border-foreground/20 transition-all duration-300"
        >
          <!-- Background Image (if provided) -->
          {
            image && (
              <div class="absolute inset-0 z-0 overflow-hidden">
                {typeof image === "string" ? (
                  <img
                    src={image}
                    alt={title}
                    class="w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-110"
                  />
                ) : (
                  <>
                    <img
                      src={image.light}
                      alt={title}
                      class="w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-110 dark:hidden"
                    />
                    <img
                      src={image.dark}
                      alt={title}
                      class="w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-110 hidden dark:block"
                    />
                  </>
                )}
                <!-- Gradient Overlay for better text visibility -->
                <div class="service-case-gradient absolute inset-0"></div>
              </div>
            )
          }

          <!-- Card Content -->
          <div class="relative z-10 p-8 sm:p-12">
            <!-- Subtitle (small text at top) -->
            <p class="text-sm font-mono uppercase tracking-wider mb-4">
              {subtitle}
            </p>

            <!-- Title (large serif heading) -->
            <h3
              class="font-display text-4xl sm:text-5xl font-normal leading-tight mb-6"
            >
              {title}
            </h3>

            <!-- Description -->
            <p class="text-base sm:text-lg leading-relaxed mb-8 opacity-80">
              {description}
            </p>

            <!-- Link with Arrow -->
            <div
              class="w-full flex items-center justify-between text-sm sm:text-base font-medium text-[var(--color-foreground)] border-b border-[var(--color-foreground)]/60 pb-3 transition-all duration-300 group-hover:border-[var(--color-foreground)]"
            >
              <span>{defaultLinkText}</span>
              <svg
                class="service-case-arrow w-5 h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                aria-hidden="true"
              >
                <path
                  d="M7 17L17 7M17 7H7M17 7V17"
                  stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </svg>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  /* Smooth image zoom effect */
  .group img {
    transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .group:hover img {
    transform: scale(1.1);
  }

  /* Gradient overlay for better text visibility */
  .service-case-gradient {
    background: linear-gradient(
      to top,
      rgba(250, 250, 250, 0.95) 0%,
      rgba(250, 250, 250, 0.85) 30%,
      rgba(250, 250, 250, 0.4) 60%,
      rgba(250, 250, 250, 0) 100%
    );
  }

  :global(.dark) .service-case-gradient {
    background: linear-gradient(
      to top,
      rgba(12, 17, 29, 0.95) 0%,
      rgba(12, 17, 29, 0.85) 30%,
      rgba(12, 17, 29, 0.4) 60%,
      rgba(12, 17, 29, 0) 100%
    );
  }

  /* Service Case Study arrow animation */
  .service-case-arrow {
    opacity: 0.7;
    transform: rotate(0deg);
    transition:
      transform 0.3s ease-in-out,
      opacity 0.3s ease-in-out;
  }

  .group:hover .service-case-arrow {
    opacity: 1;
    transform: rotate(45deg);
  }
</style>