---
import { getCurrentLanguage } from "../../lib/i18n";
import { t } from "../../lib/translations";

interface Props {
  sectionTitle?: string;
  approaches: Array<{
    title: string;
    description: string;
    borderAnimation?: "friction" | "teamwork" | "strength";
  }>;
}

const currentLang = getCurrentLanguage(Astro.url);
const defaultTitle = await t("approach.title", currentLang, "APPROACH");
const { sectionTitle = defaultTitle, approaches } = Astro.props;
---

<section class="approach-section py-32">
  <div class="container mx-auto px-6">
    <!-- Section Title -->
    <div class="mb-16 flex items-center gap-6">
      <h2
        class="text-[12px] sm:text-xs font-mono uppercase text-foreground/70 whitespace-nowrap"
      >
        {sectionTitle}
      </h2>
      <div class="flex-1 h-px bg-[var(--color-border)]"></div>
    </div>

    <!-- Approach Cards Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 lg:gap-24 gap-4 max-w-full">
      {
        approaches.map((approach, index) => (
          <div
            class={`approach-card approach-${approach.borderAnimation || "friction"}`}
          >
            <div class="approach-content">
              <h3 class="approach-title text-4xl md:text-6xl font-display text-foreground transition-colors duration-300">
                {approach.title}
              </h3>
              <p class="text-base leading-relaxed text-muted-foreground mt-8">
                {approach.description}
              </p>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .approach-section {
    position: relative;
  }

  .approach-card {
    position: relative;
  }

  .approach-content {
    position: relative;
  }

  .approach-title {
    position: relative;
    padding-right: 25%; /* Increased padding to force text wrapping while keeping border at edge */
    margin-bottom: 0;
    display: block;
    line-height: 1.1;
  }

  /* Persistent border on the right side of title */
  .approach-title::after {
    content: "";
    position: absolute;
    right: 0;
    top: -0.2em;
    bottom: -0.2em;
    width: 2px;
    background: var(--color-foreground);
    opacity: 1;
  }

  /* Divider between cards (visible on desktop only) */
  .approach-divider {
    position: absolute;
    right: -2rem;
    top: 0;
    bottom: 0;
    width: 1px;
    background: var(--color-border);
  }

  /* Mobile: Stack cards without dividers */
  @media (max-width: 1024px) {
    .approach-card {
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 3rem;
      margin-bottom: 3rem;
    }

    .approach-card:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .approach-title {
      padding-right: 2rem;
    }
  }
</style>
